{% extends 'base.html' %}
{% block content %}
<form class="search-bar" action="{{ url_for('main.search') }}" method="get">
  <input type="search" name="q" placeholder="Search items...">
  <button class="btn" type="submit">Search</button>
</form>
{% if items %}
<section class="grid">
  {% for item in items %}
  <article class="card">
    <h3 class="title"><a href="{{ url_for('main.product_detail', item_id=item._id) }}">{{ item.title }}</a></h3>
    <p class="price">${{ '%.2f'|format(item.price or 0) }}</p>
    <p class="meta">{{ item.school or '' }} {{ "Â· " ~ item.category if item.category else "" }}</p>
    <div class="row-btns">
      <a href="{{ url_for('main.product_detail', item_id=item._id) }}" class="btn">Details</a>
      <a href="{{ url_for('main.contact', item_id=item._id) }}" class="btn">Contact Seller</a>
    </div>
  </article>
  {% endfor %}
</section>
{% else %}
<p style="text-align:center;color:#888;">No items yet. Be the first to <a href="{{ url_for('main.publish') }}">publish</a>!</p>
{% endif %}
{% endblock %}
